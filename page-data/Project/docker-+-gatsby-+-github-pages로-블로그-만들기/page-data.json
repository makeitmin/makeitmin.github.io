{"componentChunkName":"component---src-templates-blog-post-js","path":"/Project/docker-+-gatsby-+-github-pages로-블로그-만들기/","result":{"data":{"site":{"siteMetadata":{"title":"makeitmin.io","author":"Seongmin Ha","siteUrl":"https://makeitmin.github.io","comment":{"disqusShortName":"","utterances":"makeitmin/makeitmin.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"d8975f31-7ce9-5efc-a5ae-4762129d4943","excerpt":"사실 Docker는 쓸 생각이 없었다. 그냥 로컬에서 작업할 계획이었는데, 기존에 설치된 React를 비롯한 각종 모듈과 Gatsby가 버전 충돌을 일으키며 이틀 밤낮을 붙잡아도 해결될 기미가 보이지 않았다(..) 그래서 Docker를 이용해서 깨끗한 새로운 환경에서 블로그를 만들어 보기로 했다. 블로그를 만들 순서는 다음과 같다. Docker 환경 세팅 Gatsby 환경 세팅 GitHub Pages 배포 Docker 환경 세팅 Linux/Unix 환경이 아닌 Windows 환경이라면 WSL…","html":"<p>사실 Docker는 쓸 생각이 없었다. 그냥 로컬에서 작업할 계획이었는데, 기존에 설치된 React를 비롯한 각종 모듈과 Gatsby가 버전 충돌을 일으키며 이틀 밤낮을 붙잡아도 해결될 기미가 보이지 않았다(..) 그래서 Docker를 이용해서 깨끗한 새로운 환경에서 블로그를 만들어 보기로 했다.</p>\n<p>블로그를 만들 순서는 다음과 같다.</p>\n<ol>\n<li>Docker 환경 세팅</li>\n<li>Gatsby 환경 세팅</li>\n<li>GitHub Pages 배포</li>\n</ol>\n<h2 id=\"docker-환경-세팅\" style=\"position:relative;\"><a href=\"#docker-%ED%99%98%EA%B2%BD-%EC%84%B8%ED%8C%85\" aria-label=\"docker 환경 세팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker 환경 세팅</h2>\n<p>Linux/Unix 환경이 아닌 Windows 환경이라면 WSL2 터미널에서 다음을 수행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker pull seongminha/blog:2.0</code></pre></div>\n<p>참고로 해당 이미지는 미리 생성해서 Docker Hub에 올려둔 것으로, 최초에 이미지를 생성하기 위해 빌드했던 Dockerfile은 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#1 베이스 이미지</span>\nFROM ubuntu:18.04\nMAINTAINER Seongmin <span class=\"token string\">\"seongminha0910@gmail.com\"</span>\n\n<span class=\"token comment\">#2 환경변수 설정</span>\nENV <span class=\"token environment constant\">LANG</span> C.UTF-8\nENV DEBIAN_FRONTEND noninteractive\n\n<span class=\"token comment\">#3 필요한 프로그램 설치</span>\n\n<span class=\"token comment\">#3-1 apt 패키지 업데이트</span>\nRUN <span class=\"token function\">apt-get</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">apt-get</span> -y upgrade\n\n<span class=\"token comment\">#3-2 기본 프로그램 설치</span>\nRUN <span class=\"token function\">apt-get</span> update\nRUN <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y <span class=\"token function\">sudo</span> net-tools <span class=\"token function\">wget</span> <span class=\"token function\">nano</span> <span class=\"token function\">lsof</span> <span class=\"token function\">curl</span> gnupg gnupg2 gnupg1\n\n<span class=\"token comment\">#3-3 Git 설치</span>\nRUN <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y <span class=\"token function\">git</span>\n\n<span class=\"token comment\">#3-4 Node.js 버전 세팅 및 설치</span>\nRUN <span class=\"token function\">curl</span> -sL https://deb.nodesource.com/setup_12.x <span class=\"token operator\">|</span> <span class=\"token function\">bash</span> -\nRUN <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y nodejs\nRUN <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y gcc g++ <span class=\"token function\">make</span></code></pre></div>\n<h2 id=\"gatsby-환경-세팅\" style=\"position:relative;\"><a href=\"#gatsby-%ED%99%98%EA%B2%BD-%EC%84%B8%ED%8C%85\" aria-label=\"gatsby 환경 세팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby 환경 세팅</h2>\n<ol>\n<li>\n<p>다음과 같이 Docker 이미지를 사용하여 Docker 컨테이너를 생성 및 실행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker run -it -p <span class=\"token number\">8000</span>:8000 --name blog seongminha/blog:2.0</code></pre></div>\n</li>\n<li>다음 <a href=\"https://89douner.tistory.com/123\">블로그</a>를 따라 Visual Studio Code에 Docker 환경을 attach 한다.</li>\n<li>\n<p>Visual Studio Code의 Terminal에서 다음을 실행하여 Docker 환경이 제대로 세팅되었는지 확인한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">node -v <span class=\"token comment\"># 12.X 버전</span>\n<span class=\"token function\">npm</span> -v <span class=\"token comment\"># 6.X 버전</span></code></pre></div>\n</li>\n<li>\n<p>Yarn과 Gatsby를 설치한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g <span class=\"token function\">yarn</span>\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g gatsby-cli</code></pre></div>\n</li>\n<li>\n<p>Gatsby Starter Theme 중에 마음에 드는 것을 가져와서 다음을 실행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">gatsby new blog https://~</code></pre></div>\n</li>\n<li>\n<p>다음을 실행하면 <a href=\"http://localhost:8000\">localhost:8000</a> 에서 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> blog\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span>\ngatsby develop</code></pre></div>\n<p>대부분 해당 템플릿의 GitHub 소스에 가면 포스트를 어느 폴더에 작성해야 하는지,  <code class=\"language-text\">gatsby-config.js</code> 같은 파일이 관리하는 메타 정보나 프로필 등 개인마다 어떤 사항을 커스터마이즈 할 수 있는지도 알려주고 있다. 해당되는 부분들을 수정해서 저장하고, <code class=\"language-text\">gatsby develop</code> 명령어를 통해 수정한 부분이 잘 반영되는지 웹으로 확인해보자.</p>\n</li>\n</ol>\n<h2 id=\"github-pages-환경-세팅\" style=\"position:relative;\"><a href=\"#github-pages-%ED%99%98%EA%B2%BD-%EC%84%B8%ED%8C%85\" aria-label=\"github pages 환경 세팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitHub Pages 환경 세팅</h2>\n<ol>\n<li>\n<p>GitHub 레포지토리 생성</p>\n<p>GitHub에 <code class=\"language-text\">GitHub계정명.github.io</code> 라는 이름의 레포지토리를 생성한다.</p>\n<p>생성한 레포지토리와 블로그 코드를 git remote로 연결해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin 'https://github.com/GitHub계정명/GitHub계정명.github.io</code></pre></div>\n</li>\n<li>\n<p>개발용 브랜치와 배포용 브랜치 분리</p>\n<p>포스트를 commit 하는 등 블로그를 수정하는 브랜치(개발용)와 최종적으로 빌드된 결과물을 HTML 파일로 배포하는 브랜치(배포용)를 분리하는 작업을 수행한다. 개발용 브랜치명은 <code class=\"language-text\">develop</code>으로 정했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> branch -m develop</code></pre></div>\n</li>\n<li>\n<p>gh-pages 설치</p>\n<p>블로그를 GitHub pages에 배포하기 위한 deploy script에 들어가는 gh-pages 모듈을 설치한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gh-pages</code></pre></div>\n</li>\n<li>\n<p>deploy script 추가</p>\n<p>Package.json의 scripts 부분에 다음 사항을 추가한다. <code class=\"language-text\">gatsby build</code> 명령어와 <code class=\"language-text\">-d</code>, <code class=\"language-text\">-b</code> 옵션은 작성한 블로그 코드를 public 폴더에 배포하고 이를 master 브랜치에 push 하는 역할이다. <code class=\"language-text\">gh-pages</code>와  <code class=\"language-text\">-r</code> 옵션은 이전에 생성했던 GitHub 레포지토리에 지금의 코드를 remote 연결하는 역할이다. 따라서 해당 레포지토리의 HTTP URL을 넣어주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token string\">\"scripts\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"deploy\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"gatsby build &amp;&amp; gh-pages -d public -b master -r 'https://github.com/GitHub계정명/GitHub계정명.github.io.git'\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>GitHub Pages 배포하기</p>\n<p>다음 명령어를 실행하여 배포를 진행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> run deploy</code></pre></div>\n<p>이후 <a href=\"https://www.github.com\">GitHub 사이트</a>에 들어가서 이전에 생성한 레포지토리의 Settings 탭에 들어가면 Pages 메뉴를 볼 수 있다. Source에 최종적으로 배포될 브랜치를 정하게 되어있는데, deploy script에서 master 브랜치에 배포하도록 정했으므로 <code class=\"language-text\">Branch: master</code> 로 지정하고, 폴더는 <code class=\"language-text\">/ (root)</code> 로 지정한 뒤 저장한다.</p>\n<p>제대로 진행이 되었다면, <code class=\"language-text\">Your site is published at https://Github계정명.github.io/</code> 라는 메시지가 뜨며 배포가 완료되었을 것이다. 해당 URL에 들어가면 블로그가 웹 사이트로 배포된 것을 알 수 있다. </p>\n</li>\n</ol>\n<h2 id=\"참고-자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\" aria-label=\"참고 자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고 자료</h2>\n<ul>\n<li>Docker 가상환경 이미지 (<a href=\"https://hub.docker.com/repository/docker/seongminha/blog\">링크</a>)</li>\n<li>VSCode에 Docker 연동하기 (<a href=\"https://89douner.tistory.com/123\">블로그</a>)</li>\n<li>Gatsby로 Github page 만들기 (<a href=\"https://velog.io/@_woogie/Gatsby%EB%A1%9C-Github-page-%EB%A7%8C%EB%93%A4%EA%B8%B0\">블로그</a>)</li>\n</ul>","frontmatter":{"title":"Docker + Gatsby + GitHub Pages로 블로그 만들기","date":"2021-03-28"}}},"pageContext":{"slug":"/Project/docker-+-gatsby-+-github-pages로-블로그-만들기/","previous":{"fields":{"slug":"/Git/gitlab에서-github로-repository-이전하기/"},"frontmatter":{"title":"GitLab에서 GitHub로 Repository 이전하기"}},"next":{"fields":{"slug":"/Project/yolov4-+-deepfashion2-로-object-detection-학습하기/"},"frontmatter":{"title":"YOLOv4 + DeepFashion2로 Object Detection 학습하기"}}}}}