{"componentChunkName":"component---src-templates-blog-post-js","path":"/Computer Science/쓰레드-풀링(pooling)/","result":{"data":{"site":{"siteMetadata":{"title":"makeitmin.io","author":"Seongmin Ha","siteUrl":"https://makeitmin.github.io","comment":{"disqusShortName":"","utterances":"makeitmin/makeitmin.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"c5c519ae-9a38-53c7-980c-de329837aa46","excerpt":"쓰레드 풀 쓰레드를 미리 생성해두는 저장소 미리 생성한 쓰레드를 작업에 할당하고 작업이 끝나면 반환 시스템의 성능 향상에 도움 쓰레드 풀의 필요성 쓰레드(커널 오브젝트)의 생성과 소멸은 상당한 자원을 소비 메모리 할당 필요 커널모드에서 유저모드로의 이동 빈번 운영체제에 리소스 정보 등록 필요 쓰레드는 스케줄러의 관리 대상이므로 스케줄러에도 부담 쓰레드 풀을 통해 미리 생성해둔 쓰레드 활용 가능 쓰레드 풀의 구현 쓰레드 풀 구조체 쓰레드 풀의 쓰레드가 작업을 할당받는 과정 WorkList에 Work…","html":"<h2 id=\"쓰레드-풀\" style=\"position:relative;\"><a href=\"#%EC%93%B0%EB%A0%88%EB%93%9C-%ED%92%80\" aria-label=\"쓰레드 풀 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>쓰레드 풀</h2>\n<p>쓰레드를 미리 생성해두는 저장소</p>\n<ul>\n<li>미리 생성한 쓰레드를 작업에 할당하고 작업이 끝나면 반환</li>\n<li>시스템의 성능 향상에 도움</li>\n</ul>\n<h2 id=\"쓰레드-풀의-필요성\" style=\"position:relative;\"><a href=\"#%EC%93%B0%EB%A0%88%EB%93%9C-%ED%92%80%EC%9D%98-%ED%95%84%EC%9A%94%EC%84%B1\" aria-label=\"쓰레드 풀의 필요성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>쓰레드 풀의 필요성</h2>\n<p>쓰레드(커널 오브젝트)의 생성과 소멸은 상당한 자원을 소비</p>\n<ul>\n<li>메모리 할당 필요</li>\n<li>커널모드에서 유저모드로의 이동 빈번</li>\n<li>운영체제에 리소스 정보 등록 필요</li>\n<li>쓰레드는 스케줄러의 관리 대상이므로 스케줄러에도 부담</li>\n</ul>\n<p>쓰레드 풀을 통해 미리 생성해둔 쓰레드 활용 가능</p>\n<h2 id=\"쓰레드-풀의-구현\" style=\"position:relative;\"><a href=\"#%EC%93%B0%EB%A0%88%EB%93%9C-%ED%92%80%EC%9D%98-%EA%B5%AC%ED%98%84\" aria-label=\"쓰레드 풀의 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>쓰레드 풀의 구현</h2>\n<p><strong>쓰레드 풀 구조체</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">struct___ThreadPool\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Work를 등록하기 위한 배열</span>\n\tWORK workList<span class=\"token punctuation\">[</span>WORK_MAX<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Thread 정보와 각 Thread 별 Event 오브젝트</span>\n\tWorkerThread workerThreadList<span class=\"token punctuation\">[</span>THREAD_MAX<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\tHANDLE workerEventList<span class=\"token punctuation\">[</span>THREAD_MAX<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Work에 대한 정보</span>\n\tDWORD idxOfCurrentWork<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 대기 1순위 Work Index</span>\n\tDWORD idxOfLastAddedWork<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 마지막 추가 Work Index + 1</span>\n\n\t<span class=\"token comment\">// Number of Thread;</span>\n\tDWORD threadIdx<span class=\"token punctuation\">;</span> <span class=\"token comment\">// Pool에 존재하는 Thread 개수</span>\n<span class=\"token punctuation\">}</span>\n gThreadPool<span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>쓰레드 풀의 쓰레드가 작업을 할당받는 과정</strong></p>\n<ol>\n<li>WorkList에 Work이 등록</li>\n<li>쓰레드의 <strong>WaitForSingleObject 함수</strong>가 관찰하고 있는 <strong>Event 오브젝트</strong>가 <strong>Signaled</strong>로 변경</li>\n<li><strong>Event 오브젝트</strong>가 <strong>Signaled 상태</strong>이면 쓰레드가 활성화</li>\n<li><strong>GetWorkFromPool 함수</strong>가 WorkList에서 <strong>Work를 할당</strong></li>\n<li>일이 끝나면 루프를 돌고 <strong>WaitForSingleObject 함수</strong>를 호출하여 <strong>Event 오브젝트</strong>를 <strong>Non-Signaled</strong>로 변경</li>\n</ol>\n<h2 id=\"참고자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-label=\"참고자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고자료</h2>\n<ul>\n<li>뇌를 자극하는 윈도우즈 시스템 프로그래밍 (<a href=\"http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&#x26;mallGb=KOR&#x26;barcode=9788979144611&#x26;orderClick=LEa&#x26;Kc=\">도서</a>, <a href=\"https://www.inflearn.com/course/%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D\">강의</a>)</li>\n</ul>","frontmatter":{"title":"쓰레드 풀링(Pooling)","date":"2021-10-17"}}},"pageContext":{"slug":"/Computer Science/쓰레드-풀링(pooling)/","previous":{"fields":{"slug":"/Computer Science/쓰레드-동기화-기법-2/"},"frontmatter":{"title":"쓰레드 동기화 기법 2"}},"next":null}}}