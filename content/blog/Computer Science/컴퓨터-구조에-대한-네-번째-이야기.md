---
title: 컴퓨터 구조에 대한 네 번째 이야기
date: 2021-11-07 11:11:99
category: Computer Science
thumbnail: { thumbnailSrc }
draft: false
---

## 메모리 계층 구조

### 하드 디스크의 2가지 기능

- 하드 디스크의 실행 : Memory Management
- 하드 디스크의 저장: File System

⇒ 하드 디스크가 메인 메모리를 보완할 때는 하드 디스크의 Memory Management 적 기능이 발현

### CPU와 메모리 사이의 느린 속도를 향상하는 방법

캐쉬 메모리를 두어 성능 향상

1. 레지스터
2. L1 캐쉬
3. L2 캐쉬
4. 메인 메모리
5. 하드 디스크

ALU가 필요한 데이터를 메모리 계층 구조에 Top-Bottom 순서로 요청하여 가장 하위의 하드 디스크까지 요청이 전달되면, 다시 가장 상위의 레지스터로 데이터를 전송하고 레지스터에 있는 데이터를 ALU가 사용

## 캐쉬와 캐쉬 알고리즘

### 캐쉬 메모리의 특징

- Temporal Locality
    - 기선언된 변수에 높은 확률로 다시 접근
- Spatial Locality
    - Temporal Locality를 가진 변수의 주변에 있는 변수에 높은 확률로 접근
    - 주변의 변수를 활용할 확률이 높다는 가정

### 캐쉬 기본 정책

- 속도가 느리기 때문에 다른 단위보다 상대적으로 큰 메인 메모리와 하드 디스크 사이의 데이터 전송 단위
- 블록 단위 데이터 전송으로 Spatial Locality가 가능함 → 캐쉬 메모리에 90% 이상의 데이터 저장 가능

## 가상 메모리

### 가상 메모리의 필요성

CPU에서 필요로 하는 메모리가 메인 메모리의 공간보다 많을 경우 사용

### 가상 메모리의 사용

- 하드디스크 영역까지 메인 메모리를 확장해서 사용 (실질적인 물리 메모리는 메인 메모리)
- MMU(Memory Management Unit)이 중간에서 CPU가 요청한 가상 메모리 주소를 물리 메모리 주소로 바꾸어 데이터를 취한 다음 전달
- 하드 디스크에 블럭 단위의 메모리 공간 미리 확보
- 오랫동안 사용되지 않은 메모리를 하드 디스크에 할당
- CPU에서 추가 메모리를 요구할 때 오랫동안 사용되지 않은 메모리를 하드 디스크에 할당하고, 하드 디스크에 저장되어 있는 필요한 블럭 단위 메모리를 회수

### 스왑 파일

프로세스에서 필요한 메모리 공간을 확장하기 위해 하드 디스크에 존재하는 파일

- 프로세스별로 가상 메모리 할당이 가능한 이유는 프로세스별 스왑 파일이 존재하기 때문
- 프로세스별 스왑 파일마다 메인 메모리의 포지션도 달라짐 (컨텍스트 스위칭)

## 참고자료

- 뇌를 자극하는 윈도우즈 시스템 프로그래밍 ([도서](http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&mallGb=KOR&barcode=9788979144611&orderClick=LEa&Kc=), [강의](https://www.inflearn.com/course/%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D))