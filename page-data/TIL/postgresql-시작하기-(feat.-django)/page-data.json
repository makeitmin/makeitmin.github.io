{"componentChunkName":"component---src-templates-blog-post-js","path":"/TIL/postgresql-시작하기-(feat.-django)/","result":{"data":{"site":{"siteMetadata":{"title":"makeitmin.io","author":"Seongmin Ha","siteUrl":"https://makeitmin.github.io","comment":{"disqusShortName":"","utterances":"makeitmin/makeitmin.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"392c1f6b-3c78-522a-91eb-5db3605c803c","excerpt":"기존에 사용한 경험이 있는 데이터베이스는 MySQL과 MongoDB가 있었다. 관계형 데이터베이스(RDB)로 범위를 줄이면 MySQL 정도였고, 엘리스 AI 트랙에서 했던 프로젝트 중에 백엔드를 Django와 PostgreSQL로 구성한 프로젝트가 있었다. 나는 그 프로젝트에서 프론트엔드를 맡았고 Django…","html":"<p>기존에 사용한 경험이 있는 데이터베이스는 MySQL과 MongoDB가 있었다. 관계형 데이터베이스(RDB)로 범위를 줄이면 MySQL 정도였고, 엘리스 AI 트랙에서 했던 프로젝트 중에 백엔드를 Django와 PostgreSQL로 구성한 프로젝트가 있었다. 나는 그 프로젝트에서 프론트엔드를 맡았고 Django를 애초에 몰랐기에 백엔드 코드를 자세히 보지 않았는데, 당시 백엔드 개발을 맡은 팀원이 개발환경 구성을 굉장히 일찍 끝내서 인상깊었던 기억이 있다.</p>\n<p>그렇게 백엔드는 캄캄하게 모른 채로 지나간 프로젝트였는데 드디어 그 프로젝트의 백엔드 코드와 데이터베이스 구성을 이해할 수 있게 될 것 같아 벌써 기분이 좋다. </p>\n<h2 id=\"postgresql-조사하기\" style=\"position:relative;\"><a href=\"#postgresql-%EC%A1%B0%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"postgresql 조사하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PostgreSQL 조사하기</h2>\n<h3 id=\"postgresql의-필요성\" style=\"position:relative;\"><a href=\"#postgresql%EC%9D%98-%ED%95%84%EC%9A%94%EC%84%B1\" aria-label=\"postgresql의 필요성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PostgreSQL의 필요성</h3>\n<p>Django 프로젝트를 위해 관계형 데이터베이스인 PostgreSQL에 대해 찾아보면서 들었던 가장 큰 의문은 <strong>관계형 데이터베이스를 사용한다면 왜 MySQL이나 Oracle이 아닌 PostgreSQL을 사용하는지</strong>였다. 답은 <strong>다른 데이터베이스에 비해 Django 입장에서 PostgreSQL만이 지원하는 기능이 많기 때문</strong>이었다. Django 공식 문서에서는 다음과 같이 설명하고 있다.</p>\n<blockquote>\n<p><strong>PostgreSQL has a number of features which are not shared by the other databases Django supports. (생략) … Django provides support for a number of data types which will only work with PostgreSQL.</strong></p>\n</blockquote>\n<h3 id=\"postgresql의-장점\" style=\"position:relative;\"><a href=\"#postgresql%EC%9D%98-%EC%9E%A5%EC%A0%90\" aria-label=\"postgresql의 장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PostgreSQL의 장점</h3>\n<ul>\n<li>무료 오픈 소스</li>\n<li>관계형 데이터베이스지만 객체 지향 데이터베이스의 기능(테이블 상속 및 함수 오버로딩)도 가능</li>\n<li>ACID(트랜잭션의 원자성, 일관성, 격리성, 내구성)를 엄격하게 준수하면서 동시성을 보장</li>\n<li>다양한 데이터 타입 지원</li>\n</ul>\n<h2 id=\"postgresql-사용하기\" style=\"position:relative;\"><a href=\"#postgresql-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"postgresql 사용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PostgreSQL 사용하기</h2>\n<h3 id=\"postgresql-설치\" style=\"position:relative;\"><a href=\"#postgresql-%EC%84%A4%EC%B9%98\" aria-label=\"postgresql 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PostgreSQL 설치</h3>\n<p>설치되는 환경은 Ubuntu 18.04 이다. <a href=\"https://www.postgresql.org/download/linux/ubuntu/\">PostgreSQL 공식 문서</a>를 통해 저장소를 확인하였다.</p>\n<ol>\n<li>\n<p><strong>postgresql과 postgresql-contrib을 설치한다.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 저장소 설정</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">sh</span> -c <span class=\"token string\">'echo \"deb http://apt.postgresql.org/pub/repos/apt <span class=\"token variable\"><span class=\"token variable\">$(</span>lsb_release -cs<span class=\"token variable\">)</span></span>-pgdg main\" > /etc/apt/sources.list.d/pgdg.list'</span>\n<span class=\"token function\">wget</span> --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> apt-key <span class=\"token function\">add</span> -\n\n<span class=\"token comment\"># apt 패키지 업데이트</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\n\n<span class=\"token comment\"># postgresql, postgresql-contrib 설치</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> postgresql postgresql-contrib</code></pre></div>\n</li>\n<li>\n<p><strong>PostgreSQL 서버를 연결한다.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">service</span> postgresql start</code></pre></div>\n</li>\n<li>\n<p><strong>서버가 잘 연결되었는지 확인한다.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 13/main (port 5432): online 이 뜨면 성공</span>\n<span class=\"token function\">service</span> postgresql status</code></pre></div>\n</li>\n<li>\n<p><strong>root 유저 설정</strong>\n여기서 조금 헤맸는데, 이유는 바로 PostgreSQL을 시작하기 위해 <code class=\"language-text\">psql</code>을 입력했지만 다음과 같은 오류가 발생했기 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">psql: error: FATAL:  role <span class=\"token string\">\"root\"</span> does not exist</code></pre></div>\n<p>이 오류는 PostgreSQL에 ‘root’라는 Role이 등록되지 않아 생긴 문제이다. Unix 시스템의 root 계정과는 다른 개념이다. 대신 PostgreSQL에 슈퍼유저로 기본 등록되어 있는 postgres 계정으로 접속하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> -u postgres psql</code></pre></div>\n<p>이렇게 하면 바로 Shell이 뜬다.</p>\n</li>\n</ol>\n<h3 id=\"postgresql의-명령어\" style=\"position:relative;\"><a href=\"#postgresql%EC%9D%98-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"postgresql의 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PostgreSQL의 명령어</h3>\n<p>데이터베이스와 테이블을 생성 또는 삭제하고, 데이터를 삽입/조회/수정/삭제할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 데이터베이스 생성</span>\nCREATE DATABASE testdb<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 데이터베이스 삭제</span>\nDROP DATABASE testdb<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 데이터베이스 접속(Linux Command)</span>\n<span class=\"token function\">sudo</span> -u postgres psql -d testdb\n\n<span class=\"token comment\"># 데이터베이스 목록</span>\n<span class=\"token punctuation\">\\</span>l\n\n<span class=\"token comment\"># 테이블 생성</span>\nCREATE TABLE <span class=\"token string\">\"USER\"</span>\n<span class=\"token punctuation\">(</span>\n\tUSER_ID SERIAL PRIMARY KEY,\n\tUSER_NAME VARCHAR<span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> UNIQUE NOT NULL,\n\tPASSWORD VARCHAR<span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> NOT NULL,\n\tEMAIL VARCHAR<span class=\"token punctuation\">(</span><span class=\"token number\">355</span><span class=\"token punctuation\">)</span> UNIQUE NOT NULL\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 테이블 삭제</span>\nDROP TABLE user<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 데이터 삽입</span>\nINSERT INTO <span class=\"token string\">\"USER\"</span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">0</span>, <span class=\"token string\">'seongmin'</span>, <span class=\"token string\">'1234'</span>, <span class=\"token string\">'seongminha0910@gmail.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 데이터 조회</span>\nSELECT * FROM <span class=\"token string\">\"USER\"</span><span class=\"token punctuation\">;</span>\nSELECT EMAIL FROM <span class=\"token string\">\"USER\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 데이터 수정</span>\nUPDATE <span class=\"token string\">\"USER\"</span> SET <span class=\"token assign-left variable\">EMAIL</span><span class=\"token operator\">=</span><span class=\"token string\">'seongminha.dev@gmail.com'</span> where <span class=\"token assign-left variable\">USER_ID</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 데이터 삭제</span>\nDELETE FROM <span class=\"token string\">\"USER\"</span> where <span class=\"token assign-left variable\">USER_ID</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"참고자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-label=\"참고자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고자료</h2>\n<ul>\n<li>SQLite vs MySQL vs PostgreSql: 관계형 DB 시스템의 비교 (<a href=\"https://smoh.tistory.com/370?category=706280\">블로그</a>)</li>\n<li>\n<p>PostgreSQL 공식문서 (<a href=\"https://www.postgresql.org/\">문서</a>)</p>\n<ul>\n<li>PostgreSQL 설치 (<a href=\"https://www.postgresql.org/download/linux/ubuntu/\">문서</a>)</li>\n<li>PostgreSQL 기본 쿼리 (<a href=\"https://www.postgresql.org/docs/9.2/sql-insert.html\">문서</a>)</li>\n</ul>\n</li>\n<li>Django 공식 문서 (<a href=\"https://docs.djangoproject.com/en/3.0/ref/contrib/postgres/\">문서</a>)</li>\n<li>Django Girls 튜토리얼 (<a href=\"https://tutorial-extensions.djangogirls.org/ko/optional_postgresql_installation#undefined-6\">문서</a>)</li>\n</ul>","frontmatter":{"title":"PostgreSQL 시작하기 (feat. Django)","date":"2021-08-03"}}},"pageContext":{"slug":"/TIL/postgresql-시작하기-(feat.-django)/","previous":{"fields":{"slug":"/Computer Science/커널-오브젝트에-대한-이해/"},"frontmatter":{"title":"커널 오브젝트에 대한 이해"}},"next":{"fields":{"slug":"/TIL/django-시작하기-(feat.-postgresql)/"},"frontmatter":{"title":"Django 시작하기 (feat. PostgreSQL)"}}}}}